<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.60">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>this的理解 | JavaScript Blog</title><meta name="description" content="积硅步 至千里">
    <link rel="preload" href="/blog/assets/style-8ee415a3.css" as="style"><link rel="stylesheet" href="/blog/assets/style-8ee415a3.css">
    <link rel="modulepreload" href="/blog/assets/app-1830d0b2.js"><link rel="modulepreload" href="/blog/assets/framework-96b046e1.js"><link rel="modulepreload" href="/blog/assets/this.html-7a84113c.js"><link rel="modulepreload" href="/blog/assets/this.html-86144448.js"><link rel="prefetch" href="/blog/assets/index.html-a1f0bb93.js" as="script"><link rel="prefetch" href="/blog/assets/inherit.html-fd139f62.js" as="script"><link rel="prefetch" href="/blog/assets/judge-data-type.html-d57979c6.js" as="script"><link rel="prefetch" href="/blog/assets/promise.html-d67c7456.js" as="script"><link rel="prefetch" href="/blog/assets/prototype.html-f69ca0bf.js" as="script"><link rel="prefetch" href="/blog/assets/module-specification.html-8659637a.js" as="script"><link rel="prefetch" href="/blog/assets/defineProperty.html-716209ad.js" as="script"><link rel="prefetch" href="/blog/assets/life-cycle.html-26a56f80.js" as="script"><link rel="prefetch" href="/blog/assets/scoped.html-d13e21f1.js" as="script"><link rel="prefetch" href="/blog/assets/clone.html-bff290af.js" as="script"><link rel="prefetch" href="/blog/assets/function's-func.html-79bdc9af.js" as="script"><link rel="prefetch" href="/blog/assets/throttle-debounce.html-ff05f62f.js" as="script"><link rel="prefetch" href="/blog/assets/cache.html-9b3fe6f8.js" as="script"><link rel="prefetch" href="/blog/assets/array-update.html-0d7b21c3.js" as="script"><link rel="prefetch" href="/blog/assets/async-update.html-a229d772.js" as="script"><link rel="prefetch" href="/blog/assets/debug.html-2dd8fcfd.js" as="script"><link rel="prefetch" href="/blog/assets/initial-rendering.html-dad18193.js" as="script"><link rel="prefetch" href="/blog/assets/render-update.html-b8c89ff5.js" as="script"><link rel="prefetch" href="/blog/assets/responsive.html-17fdf7e6.js" as="script"><link rel="prefetch" href="/blog/assets/template-compilation.html-c010724a.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-421116f5.js" as="script"><link rel="prefetch" href="/blog/assets/inherit.html-8382609d.js" as="script"><link rel="prefetch" href="/blog/assets/judge-data-type.html-a0029b4e.js" as="script"><link rel="prefetch" href="/blog/assets/promise.html-e88d8e82.js" as="script"><link rel="prefetch" href="/blog/assets/prototype.html-3890dd86.js" as="script"><link rel="prefetch" href="/blog/assets/module-specification.html-014a107d.js" as="script"><link rel="prefetch" href="/blog/assets/defineProperty.html-c00730e6.js" as="script"><link rel="prefetch" href="/blog/assets/life-cycle.html-a1e4a4ff.js" as="script"><link rel="prefetch" href="/blog/assets/scoped.html-c9702f6c.js" as="script"><link rel="prefetch" href="/blog/assets/clone.html-be7a3edc.js" as="script"><link rel="prefetch" href="/blog/assets/function's-func.html-d7a05aed.js" as="script"><link rel="prefetch" href="/blog/assets/throttle-debounce.html-98b25fc9.js" as="script"><link rel="prefetch" href="/blog/assets/cache.html-584f0c38.js" as="script"><link rel="prefetch" href="/blog/assets/array-update.html-a3446714.js" as="script"><link rel="prefetch" href="/blog/assets/async-update.html-9924596d.js" as="script"><link rel="prefetch" href="/blog/assets/debug.html-54362a76.js" as="script"><link rel="prefetch" href="/blog/assets/initial-rendering.html-b9c091d3.js" as="script"><link rel="prefetch" href="/blog/assets/render-update.html-706ac64e.js" as="script"><link rel="prefetch" href="/blog/assets/responsive.html-48b86c4d.js" as="script"><link rel="prefetch" href="/blog/assets/template-compilation.html-47572d94.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-46166703.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog/" class=""><img class="logo" src="/blog/images/hero.jpg" alt="JavaScript Blog"><span class="site-name can-hide">JavaScript Blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/blog/principle/deep-js/promise" class="" aria-label="原理"><!--[--><!--]--> 原理 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/web/browser/cache" class="" aria-label="Web体系"><!--[--><!--]--> Web体系 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://chasewindyoungs.github.io/leetcode-book/" rel="noopener noreferrer" target="_blank" aria-label="JS算法书"><!--[--><!--]--> JS算法书 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/ChaseWindYoungs/blog" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/blog/principle/deep-js/promise" class="" aria-label="原理"><!--[--><!--]--> 原理 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/web/browser/cache" class="" aria-label="Web体系"><!--[--><!--]--> Web体系 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://chasewindyoungs.github.io/leetcode-book/" rel="noopener noreferrer" target="_blank" aria-label="JS算法书"><!--[--><!--]--> JS算法书 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/ChaseWindYoungs/blog" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">深入理解JS <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/blog/principle/deep-js/promise.html" class="sidebar-item" aria-label="Promise"><!--[--><!--]--> Promise <!--[--><!--]--></a><!----></li><li><a href="/blog/principle/deep-js/inherit.html" class="sidebar-item" aria-label="继承-JS多方式实现"><!--[--><!--]--> 继承-JS多方式实现 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/principle/deep-js/this.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="this的理解"><!--[--><!--]--> this的理解 <!--[--><!--]--></a><!----></li><li><a href="/blog/principle/deep-js/judge-data-type.html" class="sidebar-item" aria-label="判断数据类型"><!--[--><!--]--> 判断数据类型 <!--[--><!--]--></a><!----></li><li><a href="/blog/principle/deep-js/prototype.html" class="sidebar-item" aria-label="原型和原型链"><!--[--><!--]--> 原型和原型链 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue2原理 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/blog/principle/vue2/defineProperty.html" class="sidebar-item" aria-label="Vue响应式原理"><!--[--><!--]--> Vue响应式原理 <!--[--><!--]--></a><!----></li><li><a href="/blog/principle/vue2/life-cycle.html" class="sidebar-item" aria-label="生命周期"><!--[--><!--]--> 生命周期 <!--[--><!--]--></a><!----></li><li><a href="/blog/principle/vue2/scoped.html" class="sidebar-item" aria-label="vue scoped原理"><!--[--><!--]--> vue scoped原理 <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item collapsible">Vue2源码学习 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/blog/principle/vue2/vue2-source/debug.html" class="sidebar-item" aria-label="源码调试"><!--[--><!--]--> 源码调试 <!--[--><!--]--></a><!----></li><li><a href="/blog/principle/vue2/vue2-source/responsive.html" class="sidebar-item" aria-label="响应式数据的原理"><!--[--><!--]--> 响应式数据的原理 <!--[--><!--]--></a><!----></li><li><a href="/blog/principle/vue2/vue2-source/template-compilation.html" class="sidebar-item" aria-label="模板渲染原理"><!--[--><!--]--> 模板渲染原理 <!--[--><!--]--></a><!----></li><li><a href="/blog/principle/vue2/vue2-source/initial-rendering.html" class="sidebar-item" aria-label="初始渲染原理"><!--[--><!--]--> 初始渲染原理 <!--[--><!--]--></a><!----></li><li><a href="/blog/principle/vue2/vue2-source/render-update.html" class="sidebar-item" aria-label="渲染更新原理"><!--[--><!--]--> 渲染更新原理 <!--[--><!--]--></a><!----></li><li><a href="/blog/principle/vue2/vue2-source/async-update.html" class="sidebar-item" aria-label="异步更新原理"><!--[--><!--]--> 异步更新原理 <!--[--><!--]--></a><!----></li><li><a href="/blog/principle/vue2/vue2-source/array-update.html" class="sidebar-item" aria-label="数组更新原理"><!--[--><!--]--> 数组更新原理 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">代码手写 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/blog/principle/write-by-hand/function&#39;s-func.html" class="sidebar-item" aria-label="call、apply、bind"><!--[--><!--]--> call、apply、bind <!--[--><!--]--></a><!----></li><li><a href="/blog/principle/write-by-hand/clone.html" class="sidebar-item" aria-label="浅拷贝与深拷贝"><!--[--><!--]--> 浅拷贝与深拷贝 <!--[--><!--]--></a><!----></li><li><a href="/blog/principle/write-by-hand/throttle-debounce.html" class="sidebar-item" aria-label="防抖、截流"><!--[--><!--]--> 防抖、截流 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">工程化 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/blog/principle/engineeringization/module-specification.html" class="sidebar-item" aria-label="模块规范(CommonJS,AMD,CMD,UMD,ES Module)"><!--[--><!--]--> 模块规范(CommonJS,AMD,CMD,UMD,ES Module) <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="this" tabindex="-1"><a class="header-anchor" href="#this" aria-hidden="true">#</a> this</h1><p>this 就是一个指针，指向调用函数的对象</p><p>this的绑定规则</p><ol><li>默认绑定</li><li>隐式绑定</li><li>硬绑定</li><li>new绑定</li></ol><h3 id="默认绑定" tabindex="-1"><a class="header-anchor" href="#默认绑定" aria-hidden="true">#</a> 默认绑定</h3><p>在不能应用其他绑定规则时，使用默认的规则，通常是独立函数调用</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello,&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&#39;YvetteLau&#39;</span><span class="token punctuation">;</span>
<span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在调用 sayHi 的时候，应用了默认绑定，this指向全局对象（非严格模式下），在严格模式下，this指向了undefined， undefined 上没有 this 对象，会抛出错误</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello,&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Christina&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sayHi</span><span class="token operator">:</span> sayHi
<span class="token punctuation">}</span>
<span class="token keyword">var</span> name<span class="token operator">=</span><span class="token string">&#39;Wiliam&#39;</span><span class="token punctuation">;</span> <span class="token comment">// Hello, Christina</span>
person<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>sayHi<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello, Wiliam</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>setTimeout的回调函数中，this使用的是默认绑定，非严格模式下，执行的是全局对象</p><h3 id="隐式绑定" tabindex="-1"><a class="header-anchor" href="#隐式绑定" aria-hidden="true">#</a> <strong>隐式绑定</strong></h3><p>函数的调用是在某个对象上触发的，即调用位置上存在调用上下文对象，典型的形式为 XXX.fn()</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello,&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;YvetteLau&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sayHi</span><span class="token operator">:</span> sayHi
<span class="token punctuation">}</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&#39;Wiliam&#39;</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello,YvetteLau.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>sayHi函数声明在外部，严格来说并不属于person，但是在调用sayHi时,调用位置会使用person的上下文来引用函数，</p><p>隐式绑定会把函数调用中的this(即此例sayHi函数中的this)绑定到这个上下文对象（即此例中的person）</p><p><strong>对象属性链中只有最后一层会影响到调用位置。</strong></p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello,&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Christina&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sayHi</span><span class="token operator">:</span> sayHi
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;YvetteLau&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">friend</span><span class="token operator">:</span> person2
<span class="token punctuation">}</span>
person1<span class="token punctuation">.</span>friend<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello, Christina.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>只有最后一层会确定this指向的是什么，不管有多少层，在判断this的时候，我们只关注最后一层，即此处的friend。</p><p>隐式绑定有一个大陷阱，绑定很容易丢失(或者说容易给我们造成误导，我们以为this指向的是什么，但是实际上并非如此).</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello,&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;YvetteLau&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sayHi</span><span class="token operator">:</span> sayHi
<span class="token punctuation">}</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&#39;Wiliam&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Hi <span class="token operator">=</span> person<span class="token punctuation">.</span>sayHi<span class="token punctuation">;</span>
<span class="token function">Hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello,Wiliam.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Hi直接指向了sayHi的引用，在调用的时候，跟person没有半毛钱的关系，</p><p>需牢牢记住这个格式:XXX.fn();fn()前如果什么都没有，那么肯定不是隐式绑定。</p><p>隐式绑定的丢失是发生在回调函数中(事件回调也是其中一种)，</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello,&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;YvetteLau&#39;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello,&#39;</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Christina&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sayHi</span><span class="token operator">:</span> sayHi
<span class="token punctuation">}</span>
<span class="token keyword">var</span> name<span class="token operator">=</span><span class="token string">&#39;Wiliam&#39;</span><span class="token punctuation">;</span>
person1<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello, Wiliam</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>person2<span class="token punctuation">.</span>sayHi<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello, Wiliam</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person2<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello, YvetteLau</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>• 第一条输出很容易理解，setTimeout的回调函数中，this使用的是默认绑定，非严格模式下，执行的是全局对象 • 第二条中的 setTimeout(person2.sayHi,100)，可以理解为: setTimeout(fn,delay){ fn(); },相当于是将person2.sayHi赋值给了一个变量，最后执行了变量，这个时候，sayHi中的this显然和person2就没有关系了</p><p>• 第三条虽然也是在setTimeout的回调中，但是我们可以看出，这是执行的是person2.sayHi()使用的是隐式绑定，因此这是this指向的是person2，跟当前的作用域没有任何关系。</p><h3 id="显式绑定" tabindex="-1"><a class="header-anchor" href="#显式绑定" aria-hidden="true">#</a> <strong>显式绑定</strong></h3><p>通过call,apply,bind的方式，显式的指定this所指向的对象。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello,&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;YvetteLau&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sayHi</span><span class="token operator">:</span> sayHi
<span class="token punctuation">}</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&#39;Wiliam&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Hi <span class="token operator">=</span> person<span class="token punctuation">.</span>sayHi<span class="token punctuation">;</span>
<span class="token function">Hi</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello, YvetteLau</span>
<span class="token function">Hi</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token comment">// Hello, YvetteLau</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用硬绑定明确将this绑定在了person上</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello,&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;YvetteLau&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sayHi</span><span class="token operator">:</span> sayHi
<span class="token punctuation">}</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&#39;Wiliam&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">Hi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">Hi</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> person<span class="token punctuation">.</span>sayHi<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello, Wiliam</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Hi.call(person, person.sayHi)的确是将this绑定到Hi中的this了。</p><p>但是在执行fn的时候，相当于直接调用了sayHi方法(记住: person.sayHi已经被赋值给fn了，隐式绑定也丢了)，没有指定this的值，对应的是默认绑定。</p><p>希望绑定不会丢失，要怎么做？很简单，调用fn的时候，也给它硬绑定。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello,&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;YvetteLau&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sayHi</span><span class="token operator">:</span> sayHi
<span class="token punctuation">}</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&#39;Wiliam&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">Hi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">Hi</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> person<span class="token punctuation">.</span>sayHi<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输出的结果为: Hello, YvetteLau，因为person被绑定到Hi函数中的this上，fn又将这个对象绑定给了sayHi的函数。这时，sayHi中的this指向的就是person对象。</p><h3 id="new-绑定" tabindex="-1"><a class="header-anchor" href="#new-绑定" aria-hidden="true">#</a> <strong>new 绑定</strong></h3><p>使用new来调用函数，会自动执行下面的操作：</p><ol><li>创建一个空对象，构造函数中的this指向这个空对象</li><li>这个新对象被执行 [[prototype]] 连接</li><li>执行构造函数方法，属性和方法被添加到this引用的对象中</li><li>如果构造函数中没有返回其它对象，那么返回this，即创建的这个的新对象，否则，返回构造函数中返回的对象。</li></ol><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	
<span class="token punctuation">}</span>
<span class="token keyword">var</span> Hi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">sayHi</span><span class="token punctuation">(</span><span class="token string">&#39;Yevtte&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello,&#39;</span><span class="token punctuation">,</span> Hi<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello, Yevtte</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在var Hi = new sayHi(&#39;Yevtte&#39;);这一步，会将sayHi中的this绑定到Hi对象上。</p><h3 id="绑定优先级" tabindex="-1"><a class="header-anchor" href="#绑定优先级" aria-hidden="true">#</a> <strong>绑定优先级</strong></h3><p>new绑定 &gt; 显式绑定 &gt; 隐式绑定 &gt; 默认绑定</p><h3 id="绑定例外" tabindex="-1"><a class="header-anchor" href="#绑定例外" aria-hidden="true">#</a> <strong>绑定例外</strong></h3><p>如果我们将null或者是undefined作为this的绑定对象传入call、apply或者是bind,这些值在调用时会被忽略，实际应用的是默认绑定规则。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Selina&#39;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&#39;Chirs&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Chirs</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>实际应用的是默认绑定规则</p><h3 id="箭头函数" tabindex="-1"><a class="header-anchor" href="#箭头函数" aria-hidden="true">#</a> <strong>箭头函数</strong></h3><p>箭头函数是ES6中新增的，它和普通函数有一些区别，箭头函数没有自己的this，它的this继承于外层代码库中的this。箭头函数在使用时，需要注意以下几点:</p><p>（1）函数体内的this对象，继承的是外层代码块的this。</p><p>（2）不可以当作构造函数，也就是说，不可以使用new命令，否则会抛出一个错误。</p><p>（3）不可以使用arguments对象，该对象在函数体内不存在。如果要用，可以用 rest 参数代替。</p><p>（4）不可以使用yield命令，因此箭头函数不能用作 Generator 函数。</p><p>（5）箭头函数没有自己的this，所以不能用call()、apply()、bind()这些方法去改变this的指向.</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">hi</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">say</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> hi <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//输出obj对象</span>
<span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">//输出obj对象</span>
<span class="token keyword">let</span> sayHi <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> fun1 <span class="token operator">=</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//输出window</span>
<span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//输出window</span>
obj<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">//输出window</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>obj.hi(); 对应了this的隐式绑定规则，this绑定在obj上，所以输出obj，很好理解。</li><li>hi(); 这一步执行的就是箭头函数，箭头函数继承上一个代码库的this，刚刚我们得出上一层的this是obj，显然这里的this就是obj.</li><li>执行sayHi();这一步也很好理解，我们前面说过这种隐式绑定丢失的情况，这个时候this执行的是默认绑定，this指向的是全局对象window.</li><li>fun1(); 这一步执行的是箭头函数，如果按照之前的理解，this指向的是箭头函数定义时所在的对象，那么这儿显然是说不通。OK，按照箭头函数的this是继承于外层代码库的this就很好理解了。外层代码库我们刚刚分析了，this指向的是window，因此这儿的输出结果是window.</li><li>obj.say(); 执行的是箭头函数，当前的代码块obj中是不存在this的，只能往上找，就找到了全局的this，指向的是window.</li></ol><h3 id="如何准确判断this指向的是什么" tabindex="-1"><a class="header-anchor" href="#如何准确判断this指向的是什么" aria-hidden="true">#</a> <strong>如何准确判断this指向的是什么？</strong></h3><ol><li>函数是否在new中调用(new绑定)，如果是，那么this绑定的是新创建的对象。</li><li>函数是否通过call,apply调用，或者使用了bind(即硬绑定)，如果是，那么this绑定的就是指定的对象。</li><li>函数是否在某个上下文对象中调用(隐式绑定)，如果是的话，this绑定的是那个上下文对象。一般是obj.foo()</li><li>如果以上都不是，那么使用默认绑定。如果在严格模式下，则绑定到undefined，否则绑定到全局对象。</li><li>如果把null或者undefined作为this的绑定对象传入call、apply或者bind，这些值在调用时会被忽略，实际应用的是默认绑定规则。</li><li>如果是箭头函数，箭头函数的this继承的是外层代码块的this。</li></ol></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">作者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: sirius.cheng@yunlsp.com">sirius.cheng</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/blog/principle/deep-js/inherit.html" class="" aria-label="继承-JS多方式实现"><!--[--><!--]--> 继承-JS多方式实现 <!--[--><!--]--></a></span><span class="next"><a href="/blog/principle/deep-js/judge-data-type.html" class="" aria-label="判断数据类型"><!--[--><!--]--> 判断数据类型 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/blog/assets/app-1830d0b2.js" defer></script>
  </body>
</html>
